# The Tobacco Club Firebase Schema Design Document

## 1: Define Data Entities

Define the data entities that will be used for data storage and manipulation. Data entities represent the various object types or concepts that our site will interact with. Here is a list of data entities for our site:
- Users
- Smoking Journals
- Milestones/Achievements
- Support Groups
- Resources/Articles

## 2: Data Modelling

```javascript
// Schema design using Firebase Firestore
// Users Collection:
// Document per user, using their unique user IDs.
// Fields: uid (User ID), email, name, DOB, joined_date, contact number, support_group_id, etc.

// Smoking Journals Collection:
// Document per journal entry, with a unique ID.
// Fields: user_id, entry_date, number_of_cigarettes, notes, etc.

// Milestones/Achievements Collection:
// Document per milestone or achievement.
// Fields: title, description, reward, required_actions, etc.

// Support Groups Collection:
// Document per support group.
// Fields: name, description, members (an array of user IDs), created_by, etc.

// Resources/Articles Collection:
// Document per resource or article.
// Fields: title, content, author, category, created_date, likes, comments, etc.
```

## 3: Establishing Relationships

Establishing relationships between entities is a critical aspect of database design in Firestore. Relationships facilitate the efficient retrieval of related information by establishing connections between various data components. 

The following examples demonstrate the implementation of relationships for The Tobacco Club:

1. Linking Journal Entries to Users:

In Firestore, the association between journal entries and their respective creators can be established by incorporating a user_id field within each journal entry document. The user_id refers to the unique identifier (UID) of the user responsible for creating the journal entry.

When a user logs a new journal entry, a new document is created in the "Smoking Journals" collection. This document provides details pertaining to the journal entry, including the date, quantity of cigarettes consumed, and accompanying notes. Furthermore, the entry incorporates the user_id field, which is specifically assigned to the unique identifier (UID) of the user responsible for creating it.

This association facilitates seamless querying and retrieval of journal entries generated by a particular user or the display of the author's details (such as name and profile picture) alongside each journal entry.

2. Membership in Support Groups:

Users have the opportunity to participate in support groups within the Tobacco Club platform, enabling them to establish connections with fellow individuals who share the common goal of smoking cessation. In order to establish the desired relationship, it is recommended to create a designated field within the user's document, referred to as support_group_id. The purpose of this field is to store the identifier of the support group to which the user is affiliated.

Upon a user's enrollment in a support group, the support_group_id field is updated with the corresponding ID of the selected group. This connection establishes a link between the user and the support group they have enrolled in.

The aforementioned relationship enables the retrieval of all members belonging to a particular support group. This can be achieved by querying the "Users" collection for users whose support_group_id matches the specified value. Additionally, it simplifies the process of showcasing the support groups in which a user is actively involved.

**In both of these instances, Firestore's capability to reference and link data across collections enables the establishment of significant relationships between entities. The relationships established within The Tobacco Club facilitate efficient query execution and data retrieval, thereby ensuring a seamless user experience.**


## 4. Security Rules

```javascript
rules_version = '';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Users collection
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Smoking Journals collection
    match /smoking_journals/{journalId} {
      allow read, write: if request.auth != null && request.auth.uid == request.resource.data.user_id;
    }
    
    // Define similar rules for other collections as needed.
    
  }
}
```

## 5. Charts and Documentation

To effectively document your Firebase schema, it is recommended to create charts and corresponding documentation:
  - An Entity-Relationship Diagram (ERD) is utilised to visually represent the structure of data and its relationships.
  - This document aims to provide a comprehensive overview of the fields and data types associated with each document.
  - This document aims to outline the security rules and access control logic in place for the system.
  - This document aims to provide an overview of data access patterns and common queries. It will discuss the various ways in which data can be accessed and the typical queries that are frequently used in data retrieval. Data access patterns refer to the methods and techniques employed to retrieve data from a database or other data storage systems. These patterns are designed to optimise the efficiency
